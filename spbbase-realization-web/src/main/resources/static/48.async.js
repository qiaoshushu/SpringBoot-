(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{"g/Sm":function(e,t,a){"use strict";var l=a("xK3H"),r=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("dnxz"));a("fhlT");var d=l(a("kXZy"));a("Z2z2");var u=l(a("kI2X"));a("9TwZ");var c=l(a("wOVV"));a("/26P");var i=l(a("aYvq"));a("1pPU");var o=l(a("KjZ1"));a("Lzml");var f=l(a("vpm+"));a("mKhK");var s=l(a("iW5v"));a("/MhY");var m=l(a("w0+5"));a("Ktq0");var p=l(a("fL5V")),h=l(a("SeLb")),E=l(a("Sx57")),v=l(a("4zp0")),g=l(a("iVWQ")),y=l(a("lF+r")),b=l(a("PApH")),w=l(a("8g53"));a("XFd2");var S=l(a("33fr"));a("E2ON");var F=l(a("jjSt"));a("Q3sr");var k,D,C,V=l(a("9NP+")),x=r(a("zLBQ")),N=a("LneV"),I=l(a("r27q")),M=l(a("I9Uw")),L=l(a("+kNj")),O=l(a("CkN6")),R=l(a("zHco")),j=l(a("Xbvm")),z=L.default.Description,Y=V.default.Item,P=F.default.Option,U=S.default.confirm,A=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},T=x.default.createElement("div",null,x.default.createElement("p",null,"\u4e0d\u901a\u8fc7\u539f\u56e0\uff1a\u6570\u636e\u6807\u672c\u4e0d\u5b8c\u6574\uff0c\u65e0\u6cd5\u8fdb\u884c\u68c0\u6d4b")),B=(k=(0,N.connect)(function(e){var t=e.reportData,a=e.Entrust,l=e.loading;return{reportData:t,Entrust:a,loading:l.models.reportData}}),D=V.default.create(),k(C=D(C=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,g.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(r))),a.state={modal1Visible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{},visible:!1,stepDirection:"horizontal",caseList:[]},a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,n=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,h.default)({},e);return l[a]=A(t[a]),l},{}),u=(0,h.default)({currentPage:e.current,pageSize:e.pageSize},n,d);l.field&&(u.sorter="".concat(l.field,"_").concat(l.order)),r({type:"reportData/fetch",payload:u})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"reportData/fetch",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var r=(0,h.default)({},t,{acceptDate:t.acceptDate&&t.acceptDate.format("YYYY-MM-DD")});a.setState({formValues:r}),l({type:"reportData/fetch",payload:r})}})},a.submitAudit=function(){var e=a.props.dispatch,t=a.state,l=t.selectedRows,r=t.caseList,n="\u60a8\u5c06\u7f16\u53f7\u4e3a   ",d="    \u7684\u6570\u636e\u63d0\u4ea4\u5ba1\u6838\uff1f",u=l.map(function(e){return e.length}),c=l.map(function(e){return e.caseNo}),i=l.map(function(e){return e.idString}),o=n+c+u+d,f=(0,w.default)((0,w.default)(a));for(var s in i)r.push(i[s]);U({title:"\u63d0\u4ea4\u5ba1\u6838",content:o,onOk:function(){e({type:"reportData/updateStatusValue",payload:{ids:r,status:1}}),p.default.success("\u63d0\u4ea4\u6210\u529f"),f.setState({selectedRows:[]}),f.handleFormReset()},onCancel:function(){}})},a.handleOk=function(){a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.handJump=function(e){I.default.push({pathname:"/case/advanced",state:{caseNumber:e.caseNumber}})},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"reportData/fetch"}),e({type:"reportData/caseStates"}),e({type:"Entrust/fetchCategorys"})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.Entrust.Category;return x.default.createElement(V.default,{onSubmit:this.handleSearch,layout:"inline"},x.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u6848\u4f8b\u7f16\u53f7"},t("caseNumber")(x.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u6848\u4f8b\u7f16\u53f7"})))),x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u4e13\u4e1a\u7c7b\u522b"},t("category")(x.default.createElement(F.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},a.map(function(e){return x.default.createElement(P,{key:e.id,value:e.id},e.value)}))))),x.default.createElement(s.default,{md:8,sm:24},x.default.createElement("span",{className:j.default.submitButtons},x.default.createElement(f.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),x.default.createElement(f.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),x.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",x.default.createElement(o.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.reportData.caseState,l=e.Entrust.Category;return x.default.createElement(V.default,{onSubmit:this.handleSearch,layout:"inline",className:j.default.searchForm},x.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u6848\u4f8b\u7f16\u53f7"},t("caseNo")(x.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u6848\u4f8b\u7f16\u53f7"})))),x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u4e13\u4e1a\u7c7b\u522b"},t("caseCategoryId")(x.default.createElement(F.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},l.map(function(e){return x.default.createElement(P,{key:e.id,value:e.id},e.value)}))))),x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u53d7\u7406\u65e5\u671f"},t("acceptDate")(x.default.createElement(c.default,{style:{width:"100%"}}))))),x.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u59d4\u6258\u4eba",style:{paddingLeft:12}},t("clientName")(x.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u59d4\u6258\u5355\u4f4d/\u4eba\u540d\u79f0"})))),x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u8054\u7cfb\u65b9\u5f0f"},t("Rcontact")(x.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u7535\u8bdd"})))),x.default.createElement(s.default,{md:8,sm:24},x.default.createElement(Y,{label:"\u62a5\u544a\u72b6\u6001"},t("Status")(x.default.createElement(F.default,{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},a.map(function(e){return x.default.createElement(P,{key:e.id,value:e.id},e.value)})))))),x.default.createElement("div",{style:{overflow:"hidden"}},x.default.createElement("div",{style:{float:"right",marginBottom:24}},x.default.createElement(f.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),x.default.createElement(f.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),x.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",x.default.createElement(o.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.reportData,l=a.data,r=a.caseState,c=t.loading,i=t.Entrust.Category,o=this.state,s=o.selectedRows,m=o.updateModalVisible,p=o.stepFormValues,h=o.visible,E=s.map(function(e){return e.caseNumber}),v={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},g=[{title:"\u6848\u4f8b\u7f16\u53f7",dataIndex:"caseNo",align:"center",render:function(t,a){return x.default.createElement(x.Fragment,null,x.default.createElement("a",{onClick:function(){return e.handJump(a)}},a.caseNo))}},{title:"\u4e13\u4e1a\u7c7b\u522b",dataIndex:"caseCategoryId",align:"center",render:function(e){var t=i.filter(function(t){return parseInt(t.id,10)===parseInt(e,10)});return t.length>0?t[0].value:e}},{title:"\u53d7\u7406\u65e5\u671f",dataIndex:"acceptDate",align:"center",render:function(e){return null!==e?x.default.createElement("span",null,(0,M.default)(e).format("YYYY-MM-DD")):e}},{title:"\u59d4\u6258\u65b9",dataIndex:"clientName",align:"center"},{title:"\u62a5\u544a\u72b6\u6001",dataIndex:"status",align:"center",render:function(e){var t=r.filter(function(t){return parseInt(t.id,10)===parseInt(e,10)}),a=t.length>0?t[0].value:e;return 2===e?x.default.createElement(u.default,{content:T,title:a,trigger:"hover"},x.default.createElement("a",null,a)):a}},{title:"\u91d1\u989d",dataIndex:"totalPrice",align:"center"},{title:"\u4e0b\u8f7d\u6b21\u6570",dataIndex:"downloadCount",align:"center"}];return x.default.createElement(R.default,{title:"\u6848\u4f8b\u767b\u8bb0"},x.default.createElement(d.default,{bordered:!1},x.default.createElement("div",{className:j.default.tableList},x.default.createElement("div",{className:j.default.tableListForm},this.renderForm()),x.default.createElement("div",{className:j.default.tableListOperator},x.default.createElement("span",null,x.default.createElement(f.default,{type:"primary"},"\u4e0b\u8f7d"),x.default.createElement(f.default,{type:"primary",onClick:this.submitAudit,disabled:0==s.filter(function(e){return 2!==e.Status}).length},"\u63d0\u4ea4\u5ba1\u6838"),x.default.createElement(f.default,{type:"primary",disabled:0===s.length,href:"javascript:POBrowser.openWindowModeless('/po/OpenWindowModeless/Word.jsp' , 'width=1200px;height=800px;');"},"\u5728\u7ebf\u7f16\u8f91"))),x.default.createElement(S.default,{width:700,title:"\u7f16\u53f7\u4e3a: ".concat(E," \u7684\u9274\u5b9a\u6750\u6599\u8be6\u60c5"),visible:h,onOk:this.handleOk,onCancel:this.handleCancel},x.default.createElement(d.default,{bordered:!1},x.default.createElement(L.default,{size:"large",title:"\u9274\u5b9a\u6750\u6599",style:{marginBottom:32}},x.default.createElement(z,{term:"\u9001\u68c0\u6750\u6599\u540d\u79f0"},"\u6307\u7eb9"),x.default.createElement(z,{term:"\u7c7b\u578b"},"\u6837\u672c"),x.default.createElement(z,{term:"\u6570\u91cf"},"2"),x.default.createElement(z,{term:"\u89c4\u683c"},"\u4efd"),x.default.createElement(z,{term:"\u63a5\u6536\u65f6\u95f4"},"2018-11-1"),x.default.createElement(z,{term:"\u6750\u6599\u6027\u8d28"},"\u539f\u4ef6"),x.default.createElement(z,{term:"\u5904\u7406\u65b9\u5f0f"},"\u5b58\u6863"),x.default.createElement(z,{term:"\u5907\u6ce8"},"\u8fd9\u662f\u4e00\u6761\u5907\u6ce8"),x.default.createElement(z,{term:"\u6587\u4ef6"},"\u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6")))),x.default.createElement(O.default,{selectedRows:s,loading:c,data:l,columns:g,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),p&&Object.keys(p).length?x.default.createElement(UpdateForm,(0,n.default)({},v,{updateModalVisible:m,values:p})):null)}}]),t}(x.PureComponent))||C)||C),K=B;t.default=K}}]);