(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{"qM+I":function(e,t,a){"use strict";var l=a("xK3H"),d=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fhlT");var n=l(a("kXZy"));a("/26P");var r=l(a("aYvq"));a("mKhK");var u=l(a("iW5v"));a("Ktq0");var i=l(a("fL5V")),o=l(a("8g53")),s=l(a("dnxz"));a("Lzml");var c=l(a("vpm+")),f=l(a("SeLb")),p=l(a("Sx57")),m=l(a("4zp0")),h=l(a("iVWQ")),b=l(a("lF+r")),y=l(a("PApH"));a("XFd2");var v=l(a("33fr"));a("E2ON");var E=l(a("jjSt"));a("/MhY");var w=l(a("w0+5"));a("Q3sr");var g,V,k,C,S,F=l(a("9NP+")),M=d(a("zLBQ")),x=a("LneV"),R=l(a("CkN6")),I=l(a("zHco")),L=l(a("Posp")),N=F.default.Item,q=w.default.TextArea,O=E.default.Option,U=v.default.confirm,A=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},z=F.default.create()(function(e){var t=e.modalVisible,a=e.form,l=a.validateFields,d=a.resetFields,n=a.getFieldDecorator,r=e.handleAdd,u=e.handleModalVisible,i=function(){l(function(e,t){e||(d(),r(t))})};return M.default.createElement(v.default,{destroyOnClose:!0,title:"\u65b0\u589e\u5b57\u5178\u6570\u636e ",visible:t,onOk:i,onCancel:function(){return u()}},M.default.createElement(N,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5b57\u5178\u6807\u7b7e"},n("label",{rules:[{required:!0,message:"\u5fc5\u586b"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(N,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5b57\u5178\u952e\u503c"},n("value",{rules:[{required:!0,type:"integer",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u503c"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(N,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6392\u5e8f\u53f7"},n("treeSort",{rules:[{required:!0,type:"integer",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u503c"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u6392\u5e8f\u53f7"}))),M.default.createElement(N,{labelCol:{span:5},wrapperCol:{span:15},label:"\u662f\u5426\u7cfb\u7edf"},n("systemic",{rules:[{required:!0,message:"\u5fc5\u586b"}]})(M.default.createElement(E.default,{placeholder:"\u8bf7\u9009\u62e9",style:{maxWidth:290,width:"100%"}},M.default.createElement(O,{value:"0"},"\u5426"),M.default.createElement(O,{value:"1"},"\u662f")))),M.default.createElement(N,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5907\u6ce8"},n("description",{rules:[{required:!1}]})(M.default.createElement(q,{placeholder:"\u5907\u6ce8",autosize:{minRows:4,maxRows:8}}))))}),P=(g=F.default.create(),g(V=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,h.default)(this,(0,b.default)(t).call(this,e)),a.handleNext=function(){var e=a.props,t=e.form,l=e.handleUpdate,d=a.state.formVals;t.validateFields(function(e,t){if(!e){var n=(0,f.default)({},d,t);a.setState({formVals:n},function(){l(n)})}})},a.renderFooter=function(e){var t=a.props.handleUpdateModalVisible;return[M.default.createElement(c.default,{key:"cancel",onClick:function(){return t()}},"\u53d6\u6d88"),M.default.createElement(c.default,{key:"submit",type:"primary",onClick:function(){return a.handleNext(e)}},"\u5b8c\u6210")]},a.state={formVals:(0,f.default)({},e.values),currentStep:0},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.updateModalVisible,l=e.handleUpdateModalVisible,d=this.state,n=d.currentStep,r=d.formVals;return M.default.createElement(v.default,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u7f16\u8f91\u5b57\u5178\u6570\u636e",visible:a,footer:this.renderFooter(n),onCancel:function(){return l()}},M.default.createElement(N,(0,s.default)({key:"label"},this.formLayout,{label:"\u5b57\u5178\u6807\u7b7e"}),t("label",{rules:[{required:!0,message:"\u5b57\u5178\u6807\u7b7e\uff01"}],initialValue:r.label})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u5b57\u5178\u6807\u7b7e"}))),M.default.createElement(N,(0,s.default)({key:"value"},this.formLayout,{label:"\u5b57\u5178\u952e\u503c"}),t("value",{rules:[{required:!0,type:"integer",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u503c"}],initialValue:r.value})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u5b57\u5178\u952e\u503c"}))),M.default.createElement(N,(0,s.default)({key:"treeSort"},this.formLayout,{label:"\u6392\u5e8f\u53f7"}),t("treeSort",{rules:[{required:!0,type:"integer",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u503c"}],initialValue:r.treeSort})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u5b57\u5178\u952e\u503c"}))),M.default.createElement(N,(0,s.default)({key:"systemic"},this.formLayout,{label:"\u7cfb\u7edf\u5b57\u5178"}),t("systemic",{rules:[{required:!0,message:"\u7cfb\u7edf\u5b57\u5178\uff01"}],initialValue:!0===r.systemic?"1":"0"})(M.default.createElement(E.default,{placeholder:"\u8bf7\u9009\u62e9",style:{maxWidth:290,width:"100%"}},M.default.createElement(O,{value:"0"},"\u5426"),M.default.createElement(O,{value:"1"},"\u662f")))),M.default.createElement(N,(0,s.default)({key:"description"},this.formLayout,{label:"\u5907\u6ce8"}),t("description",{rules:[{required:!1,message:"\u5907\u6ce8\uff01"}],initialValue:r.description})(M.default.createElement(q,{placeholder:"\u5907\u6ce8",autosize:{minRows:4,maxRows:8}}))))}}]),t}(M.PureComponent))||V),j=(k=(0,x.connect)(function(e){var t=e.dictdata,a=e.loading;return{dictdata:t,loading:a.models.dictdata}}),C=F.default.create(),k(S=C(S=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,d=new Array(l),n=0;n<l;n++)d[n]=arguments[n];return a=(0,h.default)(this,(e=(0,b.default)(t)).call.apply(e,[this].concat(d))),a.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{}},a.handleStandardTableChange=function(e,t,l){var d=a.props.dispatch,n=a.state.formValues,r=Object.keys(t).reduce(function(e,a){var l=(0,f.default)({},e);return l[a]=A(t[a]),l},{}),u=(0,f.default)({currentPage:e.current,pageSize:e.pageSize},n,r);l.field&&(u.sorter="".concat(l.field,"_").concat(l.order)),d({type:"dictdata/fetch",payload:u})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch,d=a.props.location.state;d.id;t.resetFields(),a.setState({formValues:{}}),l({type:"dictdata/fetch"})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleAdd=function(e){var t=a.props.dispatch,l=a.props.location.state,d=l.id,n=l.code;t({type:"dictdata/add",payload:{parentId:d,dictCode:n,label:e.label,value:e.value,systemic:e.systemic,enabled:!1,description:e.description,key:e.key}}),i.default.success("\u6dfb\u52a0\u6210\u529f"),a.handleModalVisible(),a.handleFormReset()},a.searchInfo=function(){var e=a.props,t=e.dispatch,l=e.form,d=a.props.location.state,n=d.id;l.validateFields(function(e,a){if(!e){var l=(0,f.default)({},a,{updatedAt:a.updatedAt&&a.updatedAt.valueOf()});l["parentId"]=n,t({type:"dictdata/fetch",payload:l})}})},a.handleSearch=function(e){e.preventDefault(),a.searchInfo()},a.showDisable=function(){var e=(0,o.default)((0,o.default)(a)),t=a.props.dispatch,l=a.state.selectedRows,d="\u60a8\u5c06\u7981\u7528\u5b57\u5178\u6807\u7b7e\u4e3a   ",n="    \u7684\u6570\u636e\uff01",r=l.map(function(e){return e.label}),u=d+r+n;l&&U({title:"\u786e\u5b9a\u8981\u7981\u7528\u6570\u636e\u5417?",content:u,onOk:function(){t({type:"dictdata/updateStatusValue",payload:{key:l.map(function(e){return e.key}),enabled:parseInt(0,10)}}),i.default.success("\u7981\u7528\u6210\u529f!"),e.setState({selectedRows:[]}),e.searchInfo()},onCancel:function(){}})},a.showRemove=function(){var e=(0,o.default)((0,o.default)(a)),t=a.props.dispatch,l=a.state.selectedRows,d="\u60a8\u5c06\u5220\u9664\u5b57\u5178\u6807\u7b7e\u4e3a   ",n="    \u7684\u6570\u636e\uff01",r=l.map(function(e){return e.label}),u=d+r+n;l&&U({title:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u5417?",content:u,onOk:function(){t({type:"dictdata/remove",payload:{key:l.map(function(e){return e.key})}}),i.default.success("\u5220\u9664\u6210\u529f"),e.setState({selectedRows:[]}),e.searchInfo()},onCancel:function(){}})},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a.handleUpdate=function(e){var t=a.props.dispatch;t({type:"dictdata/update",payload:{id:e.idString,key:e.key,label:e.label,value:e.value,treeSort:e.treeSort,systemic:e.systemic,enabled:e.enabled,description:e.description}}),i.default.success("\u4fee\u6539\u6210\u529f"),a.handleUpdateModalVisible(),a.searchInfo()},a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=(e.match.params,this.props.location.state);a.id;t({type:"dictdata/fetch"})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return M.default.createElement(F.default,{onSubmit:this.handleSearch,layout:"inline"},M.default.createElement(r.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(u.default,{md:5,sm:24},M.default.createElement(N,{label:"\u5b57\u5178\u6807\u7b7e"},e("label")(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165"})))),M.default.createElement(u.default,{md:5,sm:24},M.default.createElement(N,{label:"\u5b57\u5178\u952e\u503c"},e("value",{rules:[{type:"integer",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u6570\u503c"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165"})))),M.default.createElement(u.default,{md:5,sm:24},M.default.createElement(N,{label:"\u7cfb\u7edf\u5b57\u5178"},e("systemic")(M.default.createElement(E.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},allowClear:!0},M.default.createElement(O,{value:"0"},"\u5426"),M.default.createElement(O,{value:"1"},"\u662f"))))),M.default.createElement(u.default,{md:5,sm:24},M.default.createElement(N,{label:"\u7981\u7528"},e("enabled")(M.default.createElement(E.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},allowClear:!0},M.default.createElement(O,{value:"0"},"\u5426"),M.default.createElement(O,{value:"1"},"\u662f"))))),M.default.createElement(u.default,{md:4,sm:24},M.default.createElement("span",{className:L.default.submitButtons},M.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dictdata.data,l=t.loading,d=this.props.location.state,r=d.name,u=d.code,i=this.state,o=i.selectedRows,f=i.modalVisible,p=i.stepFormValues,m=i.updateModalVisible,h=[{title:"\u5b57\u5178\u6807\u7b7e",dataIndex:"label",align:"center",width:"20%"},{title:"\u5b57\u5178\u952e\u503c",dataIndex:"value",align:"center",width:"20%"},{title:"\u6392\u5e8f\u53f7",dataIndex:"treeSort",align:"center",width:"10%"},{title:"\u7cfb\u7edf\u5185\u7f6e",dataIndex:"systemic",align:"center",width:"10%",render:function(e){var t=0===e?"\u5426":"\u662f";return t}},{title:"\u662f\u5426\u542f\u7528",dataIndex:"enabled",align:"center",width:"10%",render:function(e){var t=0===e?"\u5426":"\u662f";return t}},{title:"\u5907\u6ce8",dataIndex:"description",width:"22%"},{title:"\u64cd\u4f5c",width:"8%",render:function(t,a){return M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},"\u7f16\u8f91"))}}],b={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},y={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return M.default.createElement(I.default,{title:"".concat(r," (").concat(u,")")},M.default.createElement(n.default,{bordered:!1},M.default.createElement("div",{className:L.default.tableList},M.default.createElement("div",{className:L.default.tableListForm},this.renderSimpleForm()),M.default.createElement("div",{className:L.default.tableListOperator},M.default.createElement("span",null,M.default.createElement(c.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u65b0\u5efa"),M.default.createElement(c.default,{icon:"delete",type:"danger",disabled:1!==o.length,onClick:function(){return e.showRemove()}},"\u5220\u9664"),M.default.createElement(c.default,{icon:"stop",type:"danger",disabled:1!==o.filter(function(e){return 1===e.enabled}).length,onClick:this.showDisable},"\u7981\u7528"))),M.default.createElement(R.default,{selectedRows:o,loading:l,data:a,columns:h,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),M.default.createElement(z,(0,s.default)({},b,{modalVisible:f})),p&&Object.keys(p).length?M.default.createElement(P,(0,s.default)({},y,{updateModalVisible:m,values:p})):null)}}]),t}(M.PureComponent))||S)||S),D=j;t.default=D}}]);