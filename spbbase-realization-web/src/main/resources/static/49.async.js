(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{rxC6:function(e,t,a){"use strict";var l=a("xK3H"),n=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(a("dnxz"));a("fhlT");var d=l(a("kXZy"));a("Z2z2");var u=l(a("kI2X"));a("9TwZ");var o=l(a("wOVV"));a("/26P");var s=l(a("aYvq"));a("1pPU");var i=l(a("KjZ1"));a("Lzml");var c=l(a("vpm+"));a("mKhK");var f=l(a("iW5v"));a("Ktq0");var m=l(a("fL5V")),p=l(a("SeLb")),h=l(a("8g53")),v=l(a("Sx57")),E=l(a("4zp0")),y=l(a("iVWQ")),g=l(a("lF+r")),b=l(a("PApH"));a("XFd2");var k=l(a("33fr"));a("E2ON");var w=l(a("jjSt"));a("Q3sr");var S=l(a("9NP+"));a("/MhY");var R,C,M,F,V,D=l(a("w0+5")),O=n(a("zLBQ")),x=a("LneV"),A=l(a("r27q")),N=l(a("I9Uw")),L=l(a("+kNj")),I=l(a("CkN6")),z=l(a("zHco")),U=l(a("Xbvm")),j=L.default.Description,P=D.default.TextArea,T=S.default.Item,Y=w.default.Option,K=k.default.confirm,q=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},B=O.default.createElement("div",null,O.default.createElement("p",null,"\u4e0d\u901a\u8fc7\u539f\u56e0\uff1a\u6570\u636e\u6807\u672c\u4e0d\u5b8c\u6574\uff0c\u65e0\u6cd5\u8fdb\u884c\u68c0\u6d4b")),J=(R=S.default.create(),R(C=function(e){function t(){var e,a;(0,v.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,y.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(n))),a.state={caseList:[]},a.onOk=function(){var e=a.props,t=e.form.validateFields,l=e.handleModal2Ok,n=e.selectedRows,r=n.map(function(e){return e.idString}),d=[];t(function(e,t){for(var n in r){var u={id:r[n],reason:t.reason,status:2};d.push(u)}e||a.setState(function(){l(d)})})},a.onCancel=function(){var e=a.props.auditeModalonCancel;a.setState(function(){e()})},a}return(0,b.default)(t,e),(0,E.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.AddModalVisable,l=e.selectedRows;l.map(function(e){return e.idString});return O.default.createElement(k.default,{title:"\u5ba1\u6838\u4e0d\u901a\u8fc7\u539f\u56e0\uff1a",visible:a,width:700,onOk:this.onOk,onCancel:this.onCancel},O.default.createElement(T,{key:"remark"},t("reason",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e0d\u901a\u8fc7\u539f\u56e0\uff01"}]})(O.default.createElement(P,{autosize:{minRows:4,maxRows:8}}))))}}]),t}(O.PureComponent))||C),Q=(M=(0,x.connect)(function(e){var t=e.reportRevData,a=e.Entrust,l=e.loading;return{reportRevData:t,Entrust:a,loading:l.models.reportRevData}}),F=S.default.create(),M(V=F(V=function(e){function t(){var e,a;(0,v.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,y.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(n))),a.state={modal1Visible:!1,updateModalVisible:!1,AddModalVisable:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{},visible:!1,stepDirection:"horizontal",caseList:[]},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,p.default)({},e);return l[a]=q(t[a]),l},{}),u=(0,p.default)({currentPage:e.current,pageSize:e.pageSize},r,d);l.field&&(u.sorter="".concat(l.field,"_").concat(l.order)),n({type:"reportRevData/fetch",payload:u})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"reportRevData/fetch",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form;n.validateFields(function(e,t){if(!e){var n=(0,p.default)({},t,{updatedAt:t.updatedAt&&t.updatedAt.valueOf()});a.setState({formValues:n}),l({type:"reportRevData/fetch",payload:n})}})},a.handleDelete=function(e){var t=a.props.dispatch,l=a.state.selectedRows;if(l){switch(e.key){case"":break;default:t({type:"reportRevData/remove",payload:{key:l.map(function(e){return e.key})},callback:function(){a.setState({selectedRows:[]})}});break}m.default.success("\u5e9f\u9664\u6210\u529f"),a.handleModalVisible()}},a.showModal=function(){a.setState({visible:!0})},a.handJump=function(e){A.default.push({pathname:"/case/advanced",state:{caseNumber:e.caseNumber}})},a.handleOk=function(){a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.showConfirm=function(){var e=a.props.dispatch,t=a.state,l=t.selectedRows,n=t.caseList,r="\u60a8\u5c06\u5ba1\u6838\u901a\u8fc7\u6848\u4f8b\u7f16\u53f7\u4e3a   ",d="    \u7684\u6570\u636e\uff01",u=l.map(function(e){return e.length}),o=l.map(function(e){return e.caseNo}),s=l.map(function(e){return e.idString}),i=r+o+u+d,c=(0,h.default)((0,h.default)(a));if(l){for(var f in s)n.push(s[f]);K({title:"\u786e\u5b9a\u901a\u8fc7\u6848\u4f8b\u5417?",content:i,onOk:function(){e({type:"reportData/updateStatusValue",payload:{ids:n,status:3}}),m.default.success("\u63d0\u4ea4\u6210\u529f"),c.setState({selectedRows:[]}),c.handleFormReset()},onCancel:function(){}})}},a.handleAudit=function(){a.setState({AddModalVisable:!0})},a.handleModal2Ok=function(e){a.props.dispatch;m.default.success("\u64cd\u4f5c\u6210\u529f"),a.auditModalonOk(),a.setState({selectedRows:[]}),a.handleFormReset()},a.auditModalonOk=function(){a.setState({AddModalVisable:!1})},a.auditeModalonCancel=function(){a.setState({AddModalVisable:!1})},a.showConfirms=function(){var e=a.props.dispatch,t=a.state,l=t.selectedRows,n=t.caseList,r="\u60a8\u5c06\u7b7e\u53d1\u7f16\u53f7\u4e3a   ",d="    \u7684\u6570\u636e\uff01",u=l.map(function(e){return e.caseNo}),o=r+u+d,s=l.map(function(e){return e.idString}),i=(0,h.default)((0,h.default)(a));if(l){for(var c in s)n.push(s[c]);K({title:"\u786e\u5b9a\u8981\u7b7e\u53d1\u5417?",content:o,onOk:function(){e({type:"reportData/updateStatusValue",payload:{ids:n,status:12}}),m.default.success("\u7b7e\u53d1\u6210\u529f"),i.setState({selectedRows:[]}),i.handleFormReset()},onCancel:function(){}})}},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a.handleUpdate=function(e){var t=a.props.dispatch;t({type:"reportRevData/updateStatusValue",payload:{name:e.name,desc:e.desc,key:e.key}}),m.default.success("\u914d\u7f6e\u6210\u529f"),a.handleUpdateModalVisible()},a}return(0,b.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"reportRevData/fetch"}),e({type:"reportRevData/caseStates"}),e({type:"Entrust/fetchCategorys"})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.Entrust.Category;return O.default.createElement(S.default,{onSubmit:this.handleSearch,layout:"inline"},O.default.createElement(s.default,{gutter:{md:8,lg:24,xl:48}},O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u6848\u4f8b\u7f16\u53f7"},t("caseNumber")(O.default.createElement(D.default,{placeholder:"\u8bf7\u8f93\u5165\u6848\u4f8b\u7f16\u53f7"})))),O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u4e13\u4e1a\u7c7b\u522b"},t("category")(O.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},a.map(function(e){return O.default.createElement(Y,{key:e.id,value:e.id},e.value)}))))),O.default.createElement(f.default,{md:8,sm:24},O.default.createElement("span",{className:U.default.submitButtons},O.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),O.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),O.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",O.default.createElement(i.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.reportRevData.caseState,l=e.Entrust.Category;return O.default.createElement(S.default,{onSubmit:this.handleSearch,layout:"inline"},O.default.createElement(s.default,{gutter:{md:8,lg:24,xl:48}},O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u6848\u4f8b\u7f16\u53f7"},t("caseNumber")(O.default.createElement(D.default,{placeholder:"\u8bf7\u8f93\u5165\u6848\u4f8b\u7f16\u53f7"})))),O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u4e13\u4e1a\u7c7b\u522b"},t("category")(O.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},l.map(function(e){return O.default.createElement(Y,{key:e.id,value:e.id},e.value)}))))),O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u53d7\u7406\u65e5\u671f"},t("proceTime")(O.default.createElement(o.default,{style:{width:"100%"}}))))),O.default.createElement(s.default,{gutter:{md:8,lg:24,xl:48}},O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u59d4\u6258\u4eba",style:{paddingLeft:12}},t("delegate")(O.default.createElement(D.default,{placeholder:"\u8bf7\u8f93\u5165\u59d4\u6258\u4eba\u59d3\u540d"})))),O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u8054\u7cfb\u65b9\u5f0f"},t("Rcontact")(O.default.createElement(D.default,{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u7535\u8bdd"})))),O.default.createElement(f.default,{md:8,sm:24},O.default.createElement(T,{label:"\u62a5\u544a\u72b6\u6001"},t("Status")(O.default.createElement(w.default,{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},a.map(function(e){return O.default.createElement(Y,{key:e.id,value:e.id},e.value)})))))),O.default.createElement("div",{style:{overflow:"hidden"}},O.default.createElement("div",{style:{float:"right",marginBottom:24}},O.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),O.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),O.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",O.default.createElement(i.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.reportRevData,l=a.data,n=a.caseState,o=t.loading,s=t.Entrust.Category,i=this.state,f=i.selectedRows,m=i.updateModalVisible,p=i.stepFormValues,h=i.visible,v=i.AddModalVisable,E=f.map(function(e){return e.caseNumber}),y={auditModalonOk:this.auditModalonOk,auditeModalonCancel:this.auditeModalonCancel,handleModal2Ok:this.handleModal2Ok},g={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},b=[{title:"\u6848\u4f8b\u7f16\u53f7",dataIndex:"caseNo",align:"center",render:function(t,a){return O.default.createElement(O.Fragment,null,O.default.createElement("a",{onClick:function(){return e.handJump(a)}},a.caseNo))}},{title:"\u4e13\u4e1a\u7c7b\u522b",dataIndex:"caseCategoryId",align:"center",render:function(e){var t=s.filter(function(t){return parseInt(t.id,10)===parseInt(e,10)});return t.length>0?t[0].value:e}},{title:"\u53d7\u7406\u65e5\u671f",dataIndex:"entrustDate",align:"center",render:function(e){return null!==e?O.default.createElement("span",null,(0,N.default)(e).format("YYYY-MM-DD")):e}},{title:"\u59d4\u6258\u65b9",dataIndex:"clientName",align:"center"},{title:"\u62a5\u544a\u72b6\u6001",dataIndex:"status",align:"center",render:function(e){var t=n.filter(function(t){return parseInt(t.id,10)===parseInt(e,10)}),a=t.length>0?t[0].value:e;return 2===e?O.default.createElement(u.default,{content:B,title:a,trigger:"hover"},O.default.createElement("a",null,a)):a}},{title:"\u91d1\u989d",dataIndex:"totalPrice",align:"center"}];return O.default.createElement(z.default,{title:"\u62a5\u544a\u5ba1\u6838"},O.default.createElement(d.default,{bordered:!1},O.default.createElement("div",{className:U.default.tableList},O.default.createElement("div",{className:U.default.tableListForm},this.renderForm()),O.default.createElement("div",{className:U.default.tableListOperator},O.default.createElement(c.default,{onClick:this.showConfirm,type:"primary",disabled:0===f.length},"\u5ba1\u6838\u901a\u8fc7"),O.default.createElement(c.default,{onClick:function(){return e.handleAudit()},type:"danger",disabled:0===f.length},"\u5ba1\u6838\u4e0d\u901a\u8fc7"),O.default.createElement(c.default,{onClick:this.showConfirms,type:"primary",disabled:0===f.length},"\u7b7e\u53d1")),O.default.createElement(k.default,{width:700,title:"\u7f16\u53f7\u4e3a: ".concat(E," \u7684\u9274\u5b9a\u6750\u6599\u8be6\u60c5"),visible:h,onOk:this.handleOk,onCancel:this.handleCancel},O.default.createElement(d.default,{bordered:!1},O.default.createElement(L.default,{size:"large",title:"\u9274\u5b9a\u6750\u6599",style:{marginBottom:32}},O.default.createElement(j,{term:"\u9001\u68c0\u6750\u6599\u540d\u79f0"},"\u6307\u7eb9"),O.default.createElement(j,{term:"\u7c7b\u578b"},"\u6837\u672c"),O.default.createElement(j,{term:"\u6570\u91cf"},"2"),O.default.createElement(j,{term:"\u89c4\u683c"},"\u4efd"),O.default.createElement(j,{term:"\u63a5\u6536\u65f6\u95f4"},"2018-11-1"),O.default.createElement(j,{term:"\u6750\u6599\u6027\u8d28"},"\u539f\u4ef6"),O.default.createElement(j,{term:"\u5904\u7406\u65b9\u5f0f"},"\u5b58\u6863"),O.default.createElement(j,{term:"\u5907\u6ce8"},"\u8fd9\u662f\u4e00\u6761\u5907\u6ce8"),O.default.createElement(j,{term:"\u6587\u4ef6"},"\u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6")))),O.default.createElement(I.default,{selectedRows:f,loading:o,data:l,columns:b,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),p&&Object.keys(p).length?O.default.createElement(UpdateForm,(0,r.default)({},g,{updateModalVisible:m,values:p})):null,O.default.createElement(J,(0,r.default)({},y,{AddModalVisable:v,selectedRows:f})))}}]),t}(O.PureComponent))||V)||V),X=Q;t.default=X}}]);