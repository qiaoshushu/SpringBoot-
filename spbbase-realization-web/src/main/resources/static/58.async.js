(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[58],{tcYS:function(e,t,a){"use strict";var l=a("xK3H"),d=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fhlT");var n=l(a("kXZy"));a("fThj");var r=l(a("cYEd"));a("khen");var u=l(a("3J+T"));a("1pPU");var i=l(a("KjZ1"));a("/26P");var o=l(a("aYvq"));a("mKhK");var c=l(a("iW5v"));a("Ktq0");var s=l(a("fL5V")),f=l(a("8g53")),m=l(a("dnxz"));a("Lzml");var p=l(a("vpm+")),h=l(a("SeLb")),b=l(a("Sx57")),E=l(a("4zp0")),y=l(a("iVWQ")),v=l(a("lF+r")),g=l(a("PApH"));a("XFd2");var k=l(a("33fr"));a("E2ON");var w=l(a("jjSt"));a("/MhY");var V=l(a("w0+5"));a("Q3sr");var C,S,F,M,x,R=l(a("9NP+")),L=d(a("zLBQ")),O=a("LneV"),U=l(a("r27q")),I=l(a("CkN6")),q=l(a("zHco")),D=l(a("Posp")),A=R.default.Item,j=V.default.TextArea,z=w.default.Option,N=k.default.confirm,P=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},T=R.default.create()(function(e){var t=e.modalVisible,a=e.form,l=a.validateFields,d=a.resetFields,n=a.getFieldDecorator,r=e.handleAdd,u=e.handleModalVisible,i=function(){l(function(e,t){e||(d(),r(t))})};return L.default.createElement(k.default,{destroyOnClose:!0,title:"\u65b0\u589e\u5b57\u5178\u7c7b\u578b ",visible:t,onOk:i,onCancel:function(){return u()}},L.default.createElement(A,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5b57\u5178\u540d\u79f0"},n("name",{rules:[{required:!0,message:"\u5fc5\u586b"}]})(L.default.createElement(V.default,{placeholder:"\u8bf7\u8f93\u5165"}))),L.default.createElement(A,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5b57\u5178\u7f16\u7801"},n("code",{rules:[{required:!0,message:"\u5fc5\u586b"}]})(L.default.createElement(V.default,{placeholder:"\u8bf7\u8f93\u5165"}))),L.default.createElement(A,{labelCol:{span:5},wrapperCol:{span:15},label:"\u662f\u5426\u7cfb\u7edf"},n("systemic",{rules:[{required:!0,message:"\u5fc5\u586b"}]})(L.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{maxWidth:290,width:"100%"}},L.default.createElement(z,{value:"0"},"\u5426"),L.default.createElement(z,{value:"1"},"\u662f")))),L.default.createElement(A,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5907\u6ce8"},n("remark",{rules:[{required:!1}]})(L.default.createElement(j,{placeholder:"\u5907\u6ce8",autosize:{minRows:4,maxRows:8}}))))}),J=(C=R.default.create(),C(S=function(e){function t(e){var a;return(0,b.default)(this,t),a=(0,y.default)(this,(0,v.default)(t).call(this,e)),a.handleNext=function(){var e=a.props,t=e.form,l=e.handleUpdate,d=a.state.formVals;t.validateFields(function(e,t){if(!e){var n=(0,h.default)({},d,t);a.setState({formVals:n},function(){l(n)})}})},a.renderFooter=function(e){var t=a.props.handleUpdateModalVisible;return[L.default.createElement(p.default,{key:"cancel",onClick:function(){return t()}},"\u53d6\u6d88"),L.default.createElement(p.default,{key:"submit",type:"primary",onClick:function(){return a.handleNext(e)}},"\u5b8c\u6210")]},a.state={formVals:(0,h.default)({},e.values),currentStep:0},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a}return(0,g.default)(t,e),(0,E.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.updateModalVisible,l=e.handleUpdateModalVisible,d=this.state,n=d.currentStep,r=d.formVals;return L.default.createElement(k.default,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u7f16\u8f91\u5b57\u5178\u7c7b\u578b",visible:a,footer:this.renderFooter(n),onCancel:function(){return l()}},L.default.createElement(A,(0,m.default)({key:"name"},this.formLayout,{label:"\u5b57\u5178\u540d\u79f0"}),t.getFieldDecorator("name",{rules:[{required:!0,message:"\u5b57\u5178\u540d\u79f0\uff01"}],initialValue:r.name})(L.default.createElement(V.default,{placeholder:"\u8bf7\u8f93\u5165\u5b57\u5178\u540d\u79f0"}))),L.default.createElement(A,(0,m.default)({key:"code"},this.formLayout,{label:"\u5b57\u5178\u7f16\u7801"}),t.getFieldDecorator("code",{rules:[{required:!0,message:"\u5b57\u5178\u7f16\u7801\uff01"}],initialValue:r.code})(L.default.createElement(V.default,{placeholder:"\u8bf7\u8f93\u5165\u5b57\u5178\u7f16\u7801"}))),L.default.createElement(A,(0,m.default)({key:"systemic"},this.formLayout,{label:"\u7cfb\u7edf\u5b57\u5178"}),t.getFieldDecorator("systemic",{rules:[{required:!0,message:"\u7cfb\u7edf\u5b57\u5178\uff01"}],initialValue:r.systemic})(L.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{maxWidth:290,width:"100%"}},L.default.createElement(z,{value:"0"},"\u5426"),L.default.createElement(z,{value:"1"},"\u662f")))),L.default.createElement(A,(0,m.default)({key:"remark"},this.formLayout,{label:"\u5907\u6ce8"}),t.getFieldDecorator("remark",{rules:[{required:!1,message:"\u5907\u6ce8\uff01"}],initialValue:r.remark})(L.default.createElement(j,{placeholder:"\u5907\u6ce8",autosize:{minRows:4,maxRows:8}}))))}}]),t}(L.PureComponent))||S),K=(F=(0,O.connect)(function(e){var t=e.dictdemo,a=e.loading;return{dictdemo:t,loading:a.models.dictdemo}}),M=R.default.create(),F(x=M(x=function(e){function t(){var e,a;(0,b.default)(this,t);for(var l=arguments.length,d=new Array(l),n=0;n<l;n++)d[n]=arguments[n];return a=(0,y.default)(this,(e=(0,v.default)(t)).call.apply(e,[this].concat(d))),a.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{}},a.handleStandardTableChange=function(e,t,l){var d=a.props.dispatch,n=a.state.formValues,r=Object.keys(t).reduce(function(e,a){var l=(0,h.default)({},e);return l[a]=P(t[a]),l},{}),u=(0,h.default)({currentPage:e.current,pageSize:e.pageSize},n,r);l.field&&(u.sorter="".concat(l.field,"_").concat(l.order)),d({type:"dictdemo/fetch",payload:u})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"dictdemo/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleAdd=function(e){var t=a.props.dispatch;t({type:"dictdemo/add",payload:{name:e.name,code:e.code,systemic:e.systemic,enabled:e.enabled,remark:e.remark}}),s.default.success("\u6dfb\u52a0\u6210\u529f"),a.handleModalVisible(),a.handleFormReset()},a.searchInfo=function(){var e=a.props,t=e.dispatch,l=e.form;l.validateFields(function(e,a){if(!e){var l=(0,h.default)({},a,{updatedAt:a.updatedAt&&a.updatedAt.valueOf()});t({type:"dictdemo/fetch",payload:l})}})},a.handleSearch=function(e){e.preventDefault(),a.searchInfo()},a.showDisable=function(){var e=(0,f.default)((0,f.default)(a)),t=a.state.selectedRows,l=a.props.dispatch,d="\u60a8\u5c06\u7981\u7528\u5b57\u5178\u540d\u79f0\u4e3a   ",n="    \u7684\u6570\u636e\uff01",r=t.map(function(e){return e.name}),u=d+r+n;t&&N({title:"\u786e\u5b9a\u8981\u7981\u7528\u6570\u636e\u5417?",content:u,onOk:function(){l({type:"dictdemo/updateStatus",payload:{key:t.map(function(e){return e.key}),enabled:parseInt(0,10)}}),s.default.success("\u7981\u7528\u6210\u529f!"),e.setState({selectedRows:[]}),e.searchInfo()},onCancel:function(){}})},a.showRemove=function(){var e=(0,f.default)((0,f.default)(a)),t=a.state.selectedRows,l=a.props.dispatch,d="\u60a8\u5c06\u5220\u9664\u5b57\u5178\u540d\u79f0\u4e3a   ",n="    \u7684\u6570\u636e\uff01",r=t.map(function(e){return e.name}),u=d+r+n;t&&N({title:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u5417?",content:u,onOk:function(){l({type:"dictdemo/remove",payload:{key:t.map(function(e){return e.key})}}),s.default.success("\u5220\u9664\u6210\u529f"),e.setState({selectedRows:[]}),e.searchInfo()},onCancel:function(){}})},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a.handleUpdate=function(e){var t=a.props.dispatch;t({type:"dictdemo/update",payload:(0,h.default)({},e)}),s.default.success("\u4fee\u6539\u6210\u529f"),a.handleUpdateModalVisible(),a.searchInfo()},a.handJump=function(e){U.default.push({pathname:"/SpbBase/Dict/dict-data-list",state:{name:e.name,code:e.code,id:e.idString}})},a}return(0,g.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"dictdemo/fetch"})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return L.default.createElement(R.default,{onSubmit:this.handleSearch,layout:"inline"},L.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(c.default,{md:5,sm:24},L.default.createElement(A,{label:"\u5b57\u5178\u540d\u79f0"},e("name")(L.default.createElement(V.default,{placeholder:"\u8bf7\u8f93\u5165"})))),L.default.createElement(c.default,{md:5,sm:24},L.default.createElement(A,{label:"\u5b57\u5178\u7f16\u7801"},e("code")(L.default.createElement(V.default,{placeholder:"\u8bf7\u8f93\u5165"})))),L.default.createElement(c.default,{md:5,sm:24},L.default.createElement(A,{label:"\u7cfb\u7edf\u5b57\u5178"},e("systemic")(L.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},L.default.createElement(z,{value:"0"},"\u5426"),L.default.createElement(z,{value:"1"},"\u662f"))))),L.default.createElement(c.default,{md:5,sm:24},L.default.createElement(A,{label:"\u7981\u7528"},e("enabled")(L.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},L.default.createElement(z,{value:"0"},"\u5426"),L.default.createElement(z,{value:"1"},"\u662f"))))),L.default.createElement(c.default,{md:4,sm:24},L.default.createElement("span",{className:D.default.submitButtons},L.default.createElement(p.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),L.default.createElement(p.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dictdemo,l=a.data,d=(a.fileStatuss,t.loading),o=this.state,c=o.selectedRows,s=o.modalVisible,f=o.stepFormValues,h=o.updateModalVisible,b=[{title:"\u5b57\u5178\u540d\u79f0",dataIndex:"name",align:"center",render:function(t,a){return L.default.createElement(L.Fragment,null,L.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},a.name))}},{title:"\u5b57\u5178\u7f16\u7801",dataIndex:"code",align:"center",render:function(t,a){return L.default.createElement(L.Fragment,null,L.default.createElement("a",{onClick:function(){return e.handJump(a)}},a.code))}},{title:"\u7cfb\u7edf\u5b57\u5178",dataIndex:"systemic",align:"center",width:"15%",render:function(e){var t=0==e?"\u5426":"\u662f";return t}},{title:"\u662f\u5426\u542f\u7528",dataIndex:"enabled",align:"center",width:"15%",render:function(e){var t=0==e?"\u5426":"\u662f";return t}},{title:"\u5907\u6ce8",dataIndex:"remark",align:"center",width:"22%"},{title:"\u64cd\u4f5c",align:"center",width:"110px",render:function(t,a){return L.default.createElement(L.Fragment,null,L.default.createElement(u.default,{title:"\u7f16\u8f91"},L.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},L.default.createElement(i.default,{type:"edit"}))),L.default.createElement(r.default,{type:"vertical"}),L.default.createElement(u.default,{title:"\u914d\u7f6e"},L.default.createElement("a",{onClick:function(){return e.handJump(a)}},L.default.createElement(i.default,{type:"setting"}))))}}],E={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},y={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return L.default.createElement(q.default,{title:"\u5b57\u5178\u5217\u8868"},L.default.createElement(n.default,{bordered:!1},L.default.createElement("div",{className:D.default.tableList},L.default.createElement("div",{className:D.default.tableListForm},this.renderSimpleForm()),L.default.createElement("div",{className:D.default.tableListOperator},L.default.createElement("span",null,L.default.createElement(p.default,{type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u65b0\u5efa"),L.default.createElement(p.default,{type:"danger",disabled:0===c.length,onClick:function(){return e.showRemove()}},"\u5220\u9664"),L.default.createElement(p.default,{type:"danger",disabled:0==c.filter(function(e){return 1===e.enabled}).length,onClick:this.showDisable},"\u7981\u7528"))),L.default.createElement(I.default,{selectedRows:c,loading:d,data:l,columns:b,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),L.default.createElement(T,(0,m.default)({},E,{modalVisible:s})),f&&Object.keys(f).length?L.default.createElement(J,(0,m.default)({},y,{updateModalVisible:h,values:f})):null)}}]),t}(L.PureComponent))||x)||x),Q=K;t.default=Q}}]);