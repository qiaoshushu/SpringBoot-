(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[67],{a1ok:function(e,t,a){"use strict";var l=a("xK3H"),n=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fhlT");var d=l(a("kXZy"));a("khen");var r=l(a("3J+T"));a("1pPU");var i=l(a("KjZ1"));a("/26P");var u=l(a("aYvq"));a("mKhK");var o=l(a("iW5v"));a("Ktq0");var s=l(a("fL5V")),f=l(a("8g53")),c=l(a("dnxz"));a("Lzml");var m=l(a("vpm+")),p=l(a("SeLb")),h=l(a("Sx57")),b=l(a("4zp0")),v=l(a("iVWQ")),y=l(a("lF+r")),E=l(a("PApH"));a("/MhY");var g=l(a("w0+5"));a("XFd2");var V=l(a("33fr"));a("Q3sr");var w,F,k,C,N,M=l(a("9NP+")),P=n(a("zLBQ")),S=a("LneV"),D=l(a("CkN6")),x=l(a("zHco")),L=l(a("0Wp1")),U=M.default.Item,R=V.default.confirm,O=M.default.create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleAdd,n=e.handleModalVisible,d=function(){a.validateFields(function(e,t){e||(a.resetFields(),l(t))})};return P.default.createElement(V.default,{destroyOnClose:!0,title:"\u6dfb\u52a0\u6570\u636e\u6743\u9650\u4fe1\u606f",visible:t,onOk:d,onCancel:function(){return n()}},P.default.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8d44\u6e90\u540d\u79f0"},a.getFieldDecorator("resourceName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0\uff01"}]})(P.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0"}))),P.default.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8868\u540d\u79f0"},a.getFieldDecorator("tableName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8868\u540d\u79f0\uff01"}]})(P.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u8868\u540d\u79f0"}))))}),j=(w=M.default.create(),w(F=function(e){function t(e){var a;return(0,h.default)(this,t),a=(0,v.default)(this,(0,y.default)(t).call(this,e)),a.handleNext=function(){var e=a.props,t=e.form,l=e.handleUpdate,n=a.state.formVals;t.validateFields(function(e,t){if(!e){var a=(0,p.default)({},n,t);l(a)}})},a.renderFooter=function(){var e=a.props.handleUpdateModalVisible;return[P.default.createElement(m.default,{key:"cancel",onClick:function(){return e()}},"\u53d6\u6d88"),P.default.createElement(m.default,{key:"submit",type:"primary",onClick:function(){return a.handleNext()}},"\u5b8c\u6210")]},a.state={formVals:(0,p.default)({},e.values)},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a}return(0,E.default)(t,e),(0,b.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.updateModalVisible,l=e.handleUpdateModalVisible,n=this.state.formVals;return P.default.createElement(V.default,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u4fee\u6539\u6570\u636e\u6743\u9650\u4fe1\u606f",visible:a,footer:this.renderFooter(),onCancel:function(){return l()}},P.default.createElement(U,(0,c.default)({key:"resourceName"},this.formLayout,{label:"\u8d44\u6e90\u540d\u79f0"}),t("resourceName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0\uff01"}],initialValue:n.resourceName})(P.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0"}))),P.default.createElement(U,(0,c.default)({key:"tableName"},this.formLayout,{label:"\u8868\u540d\u79f0"}),t("tableName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8868\u540d\u79f0"}],initialValue:n.tableName})(P.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u8868\u540d\u79f0"}))))}}]),t}(P.PureComponent))||F),q=(k=(0,S.connect)(function(e){var t=e.manageDataPermission,a=e.role,l=e.loading;return{role:a,manageDataPermission:t,loading:l.models.manageDataPermission}}),C=M.default.create(),k(N=C(N=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,v.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(n))),a.state={modalVisible:!1,selectedRows:[]},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),l({type:"manageDataPermission/fetch",payload:{}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleForm=function(){var e=a.props,t=e.dispatch,l=e.form;l.validateFields(function(e,a){if(!e){var l=(0,p.default)({},a);t({type:"manageDataPermission/fetch",payload:l})}})},a.handleSearch=function(e){e.preventDefault(),a.handleForm()},a.handleSearchs=function(){a.handleForm()},a.handleAdd=function(e){var t=(0,f.default)((0,f.default)(a)),l=a.props.dispatch;new Promise(function(t,a){l({type:"manageDataPermission/add",payload:(0,p.default)({},e,{resolve:t,reject:a})})}).then(function(e){null!==e&&(s.default.success("\u6dfb\u52a0\u6210\u529f"),t.handleSearchs())}),t.handleModalVisible()},a.handleUpdate=function(e){var t=a.props.dispatch,l=(0,f.default)((0,f.default)(a));new Promise(function(a,l){t({type:"manageDataPermission/update",payload:(0,p.default)({},e,{resolve:a,reject:l})})}).then(function(e){null!==e&&(s.default.success("\u4fee\u6539\u6210\u529f"),l.handleSearchs())}),l.handleUpdateModalVisible()},a.deleteConfirms=function(){var e=a.props.dispatch,t=a.state.selectedRows,l=(0,f.default)((0,f.default)(a)),n="\u60a8\u5c06\u5220\u9664\u8d44\u6e90\u540d\u79f0\u4e3a",d="    \u7684\u6570\u636e\u4fe1\u606f\uff01",r=t.map(function(e){return e.resourceName}),i=n+r+d,u=t.map(function(e){return e.id});t&&R({title:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u5417?",content:i,onOk:function(){new Promise(function(t,a){e({type:"manageDataPermission/remove",payload:{ids:u,resolve:t,reject:a}})}).then(function(e){null!==e&&l.handleSearchs()}),s.default.success("\u5220\u9664\u6210\u529f"),l.setState({selectedRows:[]})},onCancel:function(){}})},a}return(0,E.default)(t,e),(0,b.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"manageDataPermission/fetch"})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return P.default.createElement(M.default,{onSubmit:this.handleSearch,layout:"inline"},P.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},P.default.createElement(o.default,{md:8,sm:24},P.default.createElement(U,{label:"\u8d44\u6e90\u540d\u79f0"},e("resourceName")(P.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d\u79f0"})))),P.default.createElement(o.default,{md:8,sm:24},P.default.createElement(U,{label:"\u8868\u540d\u79f0"},e("tableName")(P.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u6570\u636e\u6743\u9650\u6635\u79f0"})))),P.default.createElement(o.default,{md:8,sm:24},P.default.createElement("span",{className:L.default.submitButtons},P.default.createElement(m.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),P.default.createElement(m.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.manageDataPermission.data,l=t.loading,n={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},u={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},o=this.state,s=o.selectedRows,f=o.modalVisible,p=o.stepFormValues,h=o.updateModalVisible,b=[{title:"\u6570\u636e\u7f16\u7801",dataIndex:"id"},{title:"\u8d44\u6e90\u540d\u79f0",dataIndex:"resourceName"},{title:"\u8868\u540d\u79f0",dataIndex:"tableName"},{title:"\u64cd\u4f5c",align:"center",width:"110px",render:function(t,a){return P.default.createElement(P.Fragment,null,P.default.createElement(r.default,{title:"\u4fee\u6539"},P.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},P.default.createElement(i.default,{type:"edit"}))))}}];return P.default.createElement(x.default,{title:"\u6570\u636e\u6743\u9650\u7ba1\u7406"},P.default.createElement(d.default,{bordered:!1},P.default.createElement("div",{className:L.default.tableList},P.default.createElement("div",{className:L.default.tableListForm},this.renderSimpleForm()),P.default.createElement("div",{className:L.default.tableListOperator},P.default.createElement(m.default,{type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u6dfb\u52a0\u6570\u636e\u6743\u9650"),P.default.createElement(m.default,{onClick:this.deleteConfirms,disabled:!s.length>0},"\u5220\u9664\u6570\u636e\u6743\u9650")),P.default.createElement(D.default,{rowKey:"id",selectedRows:s,loading:l,data:a,columns:b,onSelectRow:this.handleSelectRows}))),P.default.createElement(O,(0,c.default)({},n,{modalVisible:f})),p&&Object.keys(p).length?P.default.createElement(j,(0,c.default)({},u,{updateModalVisible:h,values:p})):null)}}]),t}(P.PureComponent))||N)||N),A=q;t.default=A}}]);